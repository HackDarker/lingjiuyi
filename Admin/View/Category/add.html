<!DOCTYPE html>
<html>

<head>
    <link href="/Public/Admin/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/Public/Plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="/Public/Admin/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="/Public/Admin/css/animate.css" rel="stylesheet">
    <link href="/Public/Admin/css/style.css" rel="stylesheet">

</head>
<style>
    .divclass{
        width: 50%;float: left;text-align: center;
    }
    .imgclass{
        width:75px;height:100px;border: 1px solid #fff0e8;position:relative;left:30%;
    }
    h3{
        color: #26ace9;z-index:99;position:absolute;left:28%;
    }
    .mintitle{
        width:75px;position:relative;left:30%;padding-top: 20px;
    }
</style>
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title" style="border-left: solid 5px #1ab394;">
                    <h5>空间使用情况</h5>
                </div>
                <div class="ibox-content" style="height: 250px;">
                    <div class="divclass">aa</div>

                    <div class="divclass">
                        <div style="width: 100%;height: 40px;">HDFS使用情况</div>
                        <div class="divclass">
                            <div class="imgclass">
                                <h3>100%</h3>
                                <div id="content">
                                    <img src="__PUBLIC__/Admin/img/bolang.png" alt="暂无图片" style=" display:block; "/>
                                    <div id="fillColor"></div>
                                </div>
                            </div>
                            <div class="mintitle"><span>HDFS使用</span></div>
                        </div>
                        <div class="divclass" style="text-align: left;">
                            <span>HDFS总量：160T</span><br/><br/>
                            <span>HDFS使用量：116T</span><br/><br/>
                            <span>HDFS剩余：44T</span><br/><br/>
                        </div>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="ibox-content">
                    <button type="button" class="btn btn-outline btn-info" onclick="create_dir()">创建目录</button>
                    <table class="table">
                        <thead>
                        <tr>
                            <th>业务名称</th>
                            <th>目录</th>
                            <th>申请大小</th>
                            <th>已使用量</th>
                            <th>使用率</th>
                            <th>业务系统</th>
                            <th>联系人</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>电子什么鬼11111</td>
                            <td><span class="line" style="display: none;">5,3,2,-1,-3,-2,2,3,5,2</span><svg class="peity" height="16" width="32"><polygon fill="#1ab394" points="0 9.375 0 0.5 3.5555555555555554 4.25 7.111111111111111 6.125 10.666666666666666 11.75 14.222222222222221 15.5 17.77777777777778 13.625 21.333333333333332 6.125 24.888888888888886 4.25 28.444444444444443 0.5 32 6.125 32 9.375"></polygon><polyline fill="transparent" points="0 0.5 3.5555555555555554 4.25 7.111111111111111 6.125 10.666666666666666 11.75 14.222222222222221 15.5 17.77777777777778 13.625 21.333333333333332 6.125 24.888888888888886 4.25 28.444444444444443 0.5 32 6.125" stroke="#169c81" stroke-width="1" stroke-linecap="square"></polyline></svg>
                            </td>
                            <td>1000M</td>
                            <td>100M</td>
                            <td class="text-navy"><i class="fa fa-level-up"></i> 40%</td>
                            <td>电子</td>
                            <td>张三</td>
                            <td>
                                <button type="button" class="btn btn-outline btn-info" onclick="space_edit(1)">空间调整</button>
                                <button type="button" class="btn btn-outline btn-info" onclick="show_charts(this,1)">使用情况</button>
                            </td>
                        </tr>
                        <tr>
                            <td>电子什么鬼22222</td>
                            <td><span class="line" style="display: none;">5,3,2,-1,-3,-2,2,3,5,2</span><svg class="peity" height="16" width="32"><polygon fill="#1ab394" points="0 9.375 0 0.5 3.5555555555555554 4.25 7.111111111111111 6.125 10.666666666666666 11.75 14.222222222222221 15.5 17.77777777777778 13.625 21.333333333333332 6.125 24.888888888888886 4.25 28.444444444444443 0.5 32 6.125 32 9.375"></polygon><polyline fill="transparent" points="0 0.5 3.5555555555555554 4.25 7.111111111111111 6.125 10.666666666666666 11.75 14.222222222222221 15.5 17.77777777777778 13.625 21.333333333333332 6.125 24.888888888888886 4.25 28.444444444444443 0.5 32 6.125" stroke="#169c81" stroke-width="1" stroke-linecap="square"></polyline></svg>
                            </td>
                            <td>1000M</td>
                            <td>100M</td>
                            <td class="text-navy"><i class="fa fa-level-up"></i> 40%</td>
                            <td>电子</td>
                            <td>张三</td>
                            <td>
                                <button type="button" class="btn btn-outline btn-info" onclick="space_edit(2)">空间调整</button>
                                <button type="button" class="btn btn-outline btn-info" onclick="show_charts(this,2)">使用情况</button>
                            </td>
                        </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 全局js -->
<script src="/Public/Admin/js/jquery.min.js"></script>
<script src="/Public/Plugins/layer/2.4/layer.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script>
<script>
    //右侧容量图
    var h = $('h3').text();
    var height = h.substring(0, h.length - 1);
    console.log(height);
    if(height == 100){
        $("img").remove();
    }
    $('#content').attr('style','position:absolute;bottom:0px;');
    $('#fillColor').attr('style','width:75px;height:'+height+'px;background-color: #7AB4F3;');
    //创建目录按钮
    function create_dir(){
        var html =
        '<div class="ibox-content">'+
        '<div class="form-horizontal">'+
        '<div class="form-group">'+
        '<label class="col-sm-2 control-label">业务名称：</label>'+
        '<div class="col-sm-6">'+
        '<input type="text" placeholder="业务名称" class="form-control">'+
        '</div>'+
        '</div>'+
        '<div class="form-group">'+
        '<label class="col-sm-2 control-label">目录名称：</label>'+
        '<div class="col-sm-6">'+
        '<input type="text" placeholder="业务名称" class="form-control">'+
        '</div>'+
        '</div>'+
        '<div class="form-group">'+
        '<label class="col-sm-2 control-label">申请大小：</label>'+
        '<div class="col-sm-6">'+
        '<input type="text" placeholder="申请大小" class="form-control">'+
        '</div>'+
        '</div>'+
        '<div class="form-group">'+
        '<label class="col-sm-2 control-label">联系人：</label>'+
        '<div class="col-sm-6">'+
        '<input type="text" placeholder="联系人" class="form-control">'+
        '</div>'+
        '</div>'+
        '</div>'+
        '</div>';

        layer.open({
            type: 1
            ,skin: 'layui-layer-newadd' //自定义样式
            ,title: '创建目录'
            ,closeBtn: false
            ,area: ['50%', '50%'] //宽高
            ,shade: 0.8
            ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
            ,resize: false
            ,btn: ['提交', '取消']
            ,btnAlign: 'c'
            ,moveType: 1 //拖拽模式，0或者1
            ,content: html
            ,yes: function(){
                //保存
                layer.msg('保存成功');
                layer.closeAll();
            }
            ,btn2: function(){
                //取消
                layer.closeAll();
            }
            ,success: function(layero){
                //不用管
            }
        });
    }
    //空间调整
    function space_edit(id){
        var html = '<div style="text-align: center;padding-top: 40px;">确认发起空间回收流程，建议空间大小为<input type="text" placeholder="4" style="width:20px;">GB</div>';
        layer.open({
            type: 1
            ,skin: 'layui-layer-newadd'
            ,title: '空间回收'
            ,area: ['40%', '40%']
            ,shade: 0.8
            ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
            ,moveType: 1 //拖拽模式，0或者1
            ,content: html
            ,btn: ['保存', '取消']
            ,yes: function(){
                //保存
                layer.msg('保存成功');
                layer.closeAll();
            }
            ,btn2: function(){
                //取消
                layer.closeAll();
            }
            ,success: function(layero){
                //不用管
            }
        });
    }
    //显示折线图
    function show_charts(now,id){
        var html = '<tr><td colspan="8"><div id="main" style="width:100%;height:400px;"></div></td></tr>';
        if($('#main').length >= 1){
            $('#main').closest('tr').remove();
            if(localStorage.id == id){
                return false;
            }else{
                localStorage.id = id;
            }
        }
        localStorage.id = id;
        $(now).closest('tr').after(html);

        var myChart = echarts.init(document.getElementById('main'));
        option = {
            title : {
                text: '近三个月使用情况',
                x: 'center',
                align: 'right'
            },
            grid: {
                bottom: 80
            },
            toolbox: { //右上角功能按钮
                show : false,
                feature: {
                    dataZoom: {
                        yAxisIndex: 'none'
                    },
                    restore: {},
                    saveAsImage: {}
                }
            },
            tooltip : {
                trigger: 'axis',
                formatter: function(params) {
                    var html = params[0]['name'] + '<br/>' +
                            '<div style="width:15px;height:15px;border-radius:50px;float:left;background-color: '+ params[0]['color']+'"></div>&emsp;'+
                            params[0]['seriesName'] + ':' + params[0]['value'] + 'M' + '<br/>' +
                            '<div style="width:15px;height:15px;border-radius:50px;float:left;background-color: '+ params[1]['color']+'"></div>&emsp;'+
                            params[1]['seriesName'] + ':' + params[1]['value'] + '%';// 数据名，类目名

                    return html ;
                },
                axisPointer: {
                    type: 'cross',
                    animation: false,
                    label: {
                        backgroundColor: '#505765'
                    }
                }
            },
            legend: {
                data:['已使用量','使用率'],
                x: 'right',
                y: '25px',
                itemHeight: 8,//图例图形高度
                itemWidth: 15,//图例图形宽度
                textStyle:{
                    fontSize:15,
                    color:'#ccc'
                }
            },

            xAxis : [
                {
                    splitLine:{ //添加x轴分割线
                        show: true,
                        interval:0,
                        lineStyle: {
                            width: 1,
                            color: ['#9c9c9c','#ccc','#ccc','#ccc','#ccc','#ccc','#ccc']
                        }
                    },
                    type : 'category',
                    axisPointer: {
                        lineStyle: {
                            color: '#20aefc',
                            opacity: 0.5,
                            width: 2
                        }

                    },
                    boundaryGap : false,
                    axisLine: {
                        onZero: false,
                        lineStyle: {
                            width: 3,
                            color: {
                                type: 'linear',
                                colorStops: [{
                                    offset: 0, color: '#1ab394' // 0% 处的颜色
                                }],
                                globalCoord: false // 缺省为 false
                            }

                        }
                    },
                    axisLabel :{
                        interval:6
                    },
                    data : [
                        '1-1'  , '1-2'  , '1-3'  ,'1-4'  ,'1-5'  ,'1-6'  ,'1-7',
                        '1-8'  , '1-9'  , '1-10' ,'1-11' ,'1-12' ,'1-13' ,'1-14',
                        '1-15' , '1-16' , '1-17' ,'1-18' ,'1-19' ,'1-20' ,'1-21',
                        '1-22' , '1-23' , '1-24' ,'1-25' ,'1-26' ,'1-27' ,'1-28',
                        '1-29' , '1-30' , '1-31' ,'2-1'  ,'2-2'  ,'2-3'  ,'2-4',
                        '2-5'  , '2-6'  , '2-7'  ,'2-8'  ,'2-9'  ,'2-10' ,'2-11',
                        '2-12' , '2-13' , '2-14' ,'2-15' ,'2-16' ,'2-17' ,'2-18',
                        '2-19' , '2-20' , '2-21' ,'2-22' ,'2-23' ,'2-24' ,'2-25',
                        '2-26' , '2-27' , '2-28' ,'3-1'  ,'3-2'  ,'3-3'  ,'3-4',
                        '3-5'  , '3-6'  , '3-7'  ,'3-8'  , '3-9' ,'3-10' ,'3-11',
                        '3-12' , '3-13' , '3-14' ,'3-15' ,'3-16' ,'3-17' ,'3-18',
                        '3-19' , '3-20' , '3-21' ,'3-22' ,'3-23' ,'3-24' ,'3-25',
                        '3-26' , '3-27' , '3-28' ,'3-29' ,'3-30' ,'3-31' ,'4-1'
                    ]
                }
            ],
            yAxis: [
                {
                    name: '',
                    type: 'value',
                    max: 1500000,
                    axisLine: {
                        lineStyle: {
                            width: 2,
                            color: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                x2: 0,
                                y2: 1,
                                colorStops: [{
                                    offset: 0, color: '#20aefc' // 0% 处的颜色
                                }, {
                                    offset: 1, color: '#1ab394' // 100% 处的颜色
                                }],
                                globalCoord: false // 缺省为 false
                            }
                        }
                    }
                },
                {
                    name: '',
                    nameLocation: 'start',
                    max: 100,
                    type: 'value',
                    axisLabel : {
                        formatter: '{value}%'
                    },
                    axisLine: {
                        lineStyle: {
                            width: 2,
                            color: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                x2: 0,
                                y2: 1,
                                colorStops: [{
                                    offset: 0, color: '#20aefc' // 0% 处的颜色
                                }, {
                                    offset: 1, color: '#1ab394' // 100% 处的颜色
                                }],
                                globalCoord: false // 缺省为 false
                            }
                        }
                    }
                }
            ],
            series: [
                {
                    name:'已使用量',
                    type:'line',
                    animation: false,
                    itemStyle:{  //折线拐点的样式
                        normal:{
                            color:'#1ab394'  //折线拐点的颜色
                        }
                    },
                    lineStyle: {
                        normal: {
                            width: 1,
                            color:"#1ab394"//折线颜色
                        }
                    },

                    data:[600000,640000,700000,800000,500000,700000,710000,650000,640000,660000,670000,690000,670000,760000,770000,770000]
                },
                {
                    name:'使用率',
                    type:'line',
                    yAxisIndex:1,
                    animation: false,
                    itemStyle:{  //折线拐点的样式
                        normal:{
                            color:'#20aefc'  //折线拐点的颜色
                        }
                    },
                    lineStyle:{  //线条的样式
                        normal:{
                            width : 1,
                            color:'#20aefc'  //折线颜色
                        }
                    },
                    data: [80,82,84,74,76,78,80,86,88,90,88,88,84,82,80,84]
                }
            ]
        };

        myChart.setOption(option);


    }


</script>
